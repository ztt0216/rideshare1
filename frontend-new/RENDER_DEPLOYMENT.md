# Frontend Deployment Guide - Render

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ–¹æ³• 1: é€šè¿‡ Render Dashboardï¼ˆæ¨èï¼‰

#### æ­¥éª¤ 1: åˆ›å»ºæ–°çš„é™æ€ç«™ç‚¹æœåŠ¡
1. ç™»å½• Render: https://dashboard.render.com
2. ç‚¹å‡» **"New +"** â†’ é€‰æ‹© **"Static Site"**

#### æ­¥éª¤ 2: è¿æ¥ GitHub ä»“åº“
1. é€‰æ‹©ä½ çš„ GitHub ä»“åº“: `ztt0216/rideshare1`
2. ç‚¹å‡» **"Connect"**

#### æ­¥éª¤ 3: é…ç½®æ„å»ºè®¾ç½®
å¡«å†™ä»¥ä¸‹ä¿¡æ¯:

| å­—æ®µ | å€¼ |
|------|-----|
| **Name** | `rideshare-frontend` |
| **Region** | Singapore (æˆ–ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸ) |
| **Branch** | `main` |
| **Root Directory** | `frontend-new` |
| **Build Command** | `npm install && npm run build` |
| **Publish Directory** | `dist` |

#### æ­¥éª¤ 4: æ·»åŠ ç¯å¢ƒå˜é‡
ç‚¹å‡» **"Advanced"** â†’ æ·»åŠ ç¯å¢ƒå˜é‡:
```
VITE_API_URL=https://rideshare-backend1.onrender.com/api
```

#### æ­¥éª¤ 5: éƒ¨ç½²
1. ç‚¹å‡» **"Create Static Site"**
2. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆçº¦ 2-3 åˆ†é’Ÿï¼‰
3. éƒ¨ç½²æˆåŠŸåä¼šå¾—åˆ°ä¸€ä¸ª URLï¼Œç±»ä¼¼: `https://rideshare-frontend.onrender.com`

---

### æ–¹æ³• 2: ä½¿ç”¨ render.yamlï¼ˆè‡ªåŠ¨éƒ¨ç½²ï¼‰

å¦‚æœä½ å·²ç»åœ¨ä»“åº“æ ¹ç›®å½•æœ‰ `render.yaml`ï¼Œå¯ä»¥åˆå¹¶å‰ç«¯é…ç½®ã€‚

**ç°åœ¨çš„å‰ç«¯é…ç½®å·²ç»åœ¨ `frontend-new/render.yaml` ä¸­äº†**

---

## ğŸ“ é…ç½®æ–‡ä»¶è¯´æ˜

### 1. `.env.production`
ç”Ÿäº§ç¯å¢ƒå˜é‡é…ç½®:
```env
VITE_API_URL=https://rideshare-backend1.onrender.com/api
```

### 2. `vite.config.js`
Vite æ„å»ºé…ç½®:
```javascript
export default defineConfig({
  plugins: [react()],
  build: {
    outDir: 'dist',
    sourcemap: false,
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom', 'react-router-dom'],
          axios: ['axios']
        }
      }
    }
  }
})
```

**ä¼˜åŒ–è¯´æ˜**:
- `outDir: 'dist'`: è¾“å‡ºåˆ° dist ç›®å½•
- `sourcemap: false`: ç”Ÿäº§ç¯å¢ƒä¸ç”Ÿæˆ sourcemapï¼ˆå‡å°ä½“ç§¯ï¼‰
- `manualChunks`: ä»£ç åˆ†å‰²ï¼Œå°†ç¬¬ä¸‰æ–¹åº“å•ç‹¬æ‰“åŒ…

### 3. `public/_redirects`
SPA è·¯ç”±é‡å®šå‘é…ç½®:
```
/*    /index.html   200
```
è¿™ç¡®ä¿æ‰€æœ‰è·¯ç”±éƒ½æŒ‡å‘ index.htmlï¼ˆReact Router éœ€è¦ï¼‰

---

## ğŸ”§ æœ¬åœ°æµ‹è¯•

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬:
```bash
cd frontend-new
npm run build
```

### é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬:
```bash
npm run preview
```
ç„¶åè®¿é—®: http://localhost:4173

---

## ğŸ“Š æ„å»ºç»“æœ

```
dist/index.html                   0.61 kB â”‚ gzip:  0.34 kB
dist/assets/index-C5xTePG6.css    3.72 kB â”‚ gzip:  1.25 kB
dist/assets/axios-ngrFHoWO.js    36.01 kB â”‚ gzip: 14.56 kB
dist/assets/vendor-C7BbO1uU.js   44.17 kB â”‚ gzip: 15.81 kB
dist/assets/index-Cd5Xrapt.js   198.25 kB â”‚ gzip: 61.29 kB
âœ“ built in 1.71s
```

**æ€»å¤§å°**: ~282 KB (æœªå‹ç¼©) / ~93 KB (gzip å‹ç¼©)

---

## ğŸŒ éƒ¨ç½²åçš„æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ç”¨æˆ·æµè§ˆå™¨                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ HTTPS
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Render Static Site (Frontend)          â”‚
â”‚  https://rideshare-frontend.onrender.com    â”‚
â”‚                                              â”‚
â”‚  - React SPA                                 â”‚
â”‚  - Vite Build                                â”‚
â”‚  - CDN Cached                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ API Calls
                   â”‚ HTTPS
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Render Web Service (Backend)          â”‚
â”‚  https://rideshare-backend1.onrender.com    â”‚
â”‚                                              â”‚
â”‚  - Java 17 + Tomcat                          â”‚
â”‚  - Docker Container                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ JDBC + SSL
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Render PostgreSQL (Database)            â”‚
â”‚                                              â”‚
â”‚  - PostgreSQL 15                             â”‚
â”‚  - Automatic Backups                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰ç¡®è®¤:
- [ ] `package.json` ä¸­æœ‰æ­£ç¡®çš„ `build` è„šæœ¬
- [ ] `.env.production` åŒ…å«æ­£ç¡®çš„åç«¯ API URL
- [ ] `vite.config.js` é…ç½®äº†æ„å»ºä¼˜åŒ–
- [ ] `public/_redirects` æ–‡ä»¶å­˜åœ¨
- [ ] æœ¬åœ°æ„å»ºæµ‹è¯•é€šè¿‡ (`npm run build`)
- [ ] ä»£ç å·²æäº¤å¹¶æ¨é€åˆ° GitHub

éƒ¨ç½²åéªŒè¯:
- [ ] ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] æ³¨å†ŒåŠŸèƒ½æ­£å¸¸
- [ ] ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] API è°ƒç”¨æ­£å¸¸ï¼ˆæ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼‰
- [ ] è·¯ç”±åˆ‡æ¢æ­£å¸¸
- [ ] æ ·å¼æ˜¾ç¤ºæ­£å¸¸

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: éƒ¨ç½²åæ˜¾ç¤º 404
**åŸå› **: ç¼ºå°‘ `_redirects` æ–‡ä»¶æˆ–é…ç½®é”™è¯¯  
**è§£å†³**: ç¡®ä¿ `public/_redirects` å­˜åœ¨å¹¶åŒ…å« `/* /index.html 200`

### Q2: API è°ƒç”¨å¤±è´¥ï¼ˆCORS é”™è¯¯ï¼‰
**åŸå› **: åç«¯ CORS é…ç½®é—®é¢˜  
**è§£å†³**: ç¡®è®¤åç«¯ `CorsFilter` å·²æ­£ç¡®é…ç½®å¹¶å…è®¸ä½ çš„å‰ç«¯åŸŸå

### Q3: ç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ
**åŸå› **: Render æ²¡æœ‰è¯»å–åˆ°ç¯å¢ƒå˜é‡  
**è§£å†³**: 
1. åœ¨ Render Dashboard çš„ Environment é¡µé¢æ·»åŠ ç¯å¢ƒå˜é‡
2. é‡æ–°éƒ¨ç½²

### Q4: æ„å»ºå¤±è´¥
**åŸå› **: Node ç‰ˆæœ¬æˆ–ä¾èµ–é—®é¢˜  
**è§£å†³**:
1. æ£€æŸ¥ Node ç‰ˆæœ¬ï¼ˆæ¨è 18.x æˆ– 20.xï¼‰
2. æ¸…é™¤ç¼“å­˜: Render Dashboard â†’ Settings â†’ Clear build cache
3. æ£€æŸ¥ `package.json` ä¸­çš„ä¾èµ–ç‰ˆæœ¬

### Q5: é¡µé¢åŠ è½½æ…¢
**åŸå› **: Render å…è´¹å¥—é¤ä¼šä¼‘çœ   
**è§£å†³**:
1. å‡çº§åˆ°ä»˜è´¹å¥—é¤
2. æˆ–ä½¿ç”¨ UptimeRobot ç­‰æœåŠ¡å®šæœŸ ping

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. å¯ç”¨ CDNï¼ˆRender è‡ªåŠ¨å¯ç”¨ï¼‰
Render é™æ€ç«™ç‚¹è‡ªåŠ¨é€šè¿‡ CDN åˆ†å‘ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚

### 2. ä»£ç åˆ†å‰²
å·²åœ¨ `vite.config.js` ä¸­é…ç½®:
```javascript
manualChunks: {
  vendor: ['react', 'react-dom', 'react-router-dom'],
  axios: ['axios']
}
```

### 3. å›¾ç‰‡ä¼˜åŒ–
å¦‚æœæœ‰å›¾ç‰‡èµ„æº:
- ä½¿ç”¨ WebP æ ¼å¼
- æ·»åŠ æ‡’åŠ è½½
- å‹ç¼©å›¾ç‰‡å¤§å°

### 4. å‹ç¼©èµ„æº
Vite è‡ªåŠ¨è¿›è¡Œ:
- JavaScript minification
- CSS minification
- Gzip å‹ç¼©

---

## ğŸ” å®‰å…¨å»ºè®®

### 1. HTTPS
Render è‡ªåŠ¨æä¾›å…è´¹çš„ SSL è¯ä¹¦ï¼ˆLet's Encryptï¼‰

### 2. ç¯å¢ƒå˜é‡
ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡:
```javascript
const API_URL = import.meta.env.VITE_API_URL;
```

### 3. å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰
åœ¨ `render.yaml` ä¸­å·²é…ç½®åŸºæœ¬çš„å®‰å…¨å¤´:
```yaml
headers:
  - path: /*
    name: X-Frame-Options
    value: DENY
  - path: /*
    name: X-Content-Type-Options
    value: nosniff
```

---

## ğŸ’° è´¹ç”¨è¯´æ˜

### Render å…è´¹å¥—é¤é™åˆ¶:
- âœ… é™æ€ç«™ç‚¹: **å®Œå…¨å…è´¹**
- âœ… è‡ªåŠ¨ HTTPS
- âœ… CDN åŠ é€Ÿ
- âœ… è‡ªåŠ¨éƒ¨ç½²
- âœ… è‡ªå®šä¹‰åŸŸåæ”¯æŒ
- âš ï¸  æ— æµé‡é™åˆ¶ï¼Œä½†æœ‰å¸¦å®½é™åˆ¶

### å‡çº§é€‰é¡¹ï¼ˆå¦‚éœ€è¦ï¼‰:
- **Starter**: $7/æœˆ - æ›´é«˜æ€§èƒ½
- **Standard**: $25/æœˆ - ç”Ÿäº§ç¯å¢ƒæ¨è

---

## ğŸ“ ä¸‹ä¸€æ­¥

éƒ¨ç½²å®Œæˆå:
1. è·å–å‰ç«¯ URLï¼ˆä¾‹å¦‚: `https://rideshare-frontend.onrender.com`ï¼‰
2. æ›´æ–°æ–‡æ¡£å’Œ README
3. æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æµç¨‹
4. å¦‚éœ€è¦ï¼Œé…ç½®è‡ªå®šä¹‰åŸŸå

---

## ğŸ”— ç›¸å…³é“¾æ¥

- **Frontend URL**: https://rideshare-frontend.onrender.com (éƒ¨ç½²åå¡«å†™)
- **Backend URL**: https://rideshare-backend1.onrender.com
- **GitHub**: https://github.com/ztt0216/rideshare1
- **Render Dashboard**: https://dashboard.render.com

---

**æœ€åæ›´æ–°**: 2025-10-15  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: å‡†å¤‡éƒ¨ç½²
